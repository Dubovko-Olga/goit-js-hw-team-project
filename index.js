import{a as f}from"./assets/vendor-CWxt7QI6.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();function q(){const t=document.querySelector(".swiper-wrapper"),n=document.querySelectorAll(".swiper-slide"),s=document.querySelector(".hero-btn-left"),o=document.querySelector(".hero-btn-right");if(!t||n.length===0||!s||!o){console.warn("Hero slider: не знайдено потрібні елементи.");return}let e=0;const r=n.length,a=()=>n[0].offsetWidth;function M(){s.classList.toggle("disabled",e===0),o.classList.toggle("disabled",e===r-1)}function m(){const B=a();t.style.transform=`translateX(-${B*e}px)`,M()}s.addEventListener("click",()=>{e>0&&(e--,m())}),o.addEventListener("click",()=>{e<r-1&&(e++,m())}),window.addEventListener("resize",m),m()}const C=document.querySelector(".menu-btn"),h=document.querySelector(".mobile-menu"),$=document.querySelector(".close-btn"),A=document.querySelectorAll(".mobile-nav-link");C.addEventListener("click",()=>{h.classList.add("open")});$.addEventListener("click",()=>{h.classList.remove("open")});A.forEach(t=>{t.addEventListener("click",()=>{h.classList.remove("open")})});const y="https://books-backend.p.goit.global/books/";async function _(){return(await f(`${y}category-list`)).data}async function p(){return(await f(`${y}top-books`)).data}async function k(t){return(await f(`${y}category?category=${encodeURIComponent(t.trim())}`)).data}async function O(t){return(await f(`${y}${t}`)).data}const w=document.querySelector(".gallery"),b=document.querySelector(".load-more"),x=document.querySelector(".counter");let c=[],d=[],l=0,u="All categories",g=[];const W=4;let L=window.innerWidth<1440;async function v(){try{if(g.length===0){const e=(await _()).filter(r=>r.list_name&&r.list_name.trim()!=="");g=[{list_name:"All categories"},...e]}const t=document.querySelector("#categories-select"),n=document.querySelector(".categories-list");if(t.innerHTML="",n.innerHTML="",window.innerWidth<1440)g.forEach(o=>{const e=document.createElement("option");e.value=o.list_name,e.textContent=o.list_name,t.appendChild(e)}),t.addEventListener("change",async o=>{if(u=o.target.value,u==="All categories")i(c);else try{const e=await k(u);i(e)}catch(e){console.error("Error loading category books:",e)}}),c.length>0||(c=(await p()).flatMap(e=>e.books)),i(c);else{const o=g.filter(e=>e.list_name&&e.list_name.trim()!=="").map(e=>`
            <li class="category-item ${e.list_name==="All categories"?"active":""}">${e.list_name}</li>`).join("");n.insertAdjacentHTML("beforeend",o),n.addEventListener("click",E),c.length>0||(c=(await p()).flatMap(r=>r.books)),i(c)}}catch(t){console.error("Error loading categories:",t)}}async function H(){try{c=(await p()).flatMap(n=>n.books),u="All categories",i(c)}catch(t){console.error("Error loading books:",t)}}function i(t){d=t,l=0,w.innerHTML="";const n=window.innerWidth<768?10:24;S(n)}function S(t){const n=d.slice(l,l+t);if(n.length===0){b.style.display="none";return}const s=n.map(({author:o,title:e,book_image:r,price:a="10.00"})=>`
      <li class="gallery-item">
        <img src="${r}" alt="${e}">
        <div class = 'book-header'>
        <p class="book-title">${e}</p>
        <p class="book-price">$${a==="0.00"?"10.00":a}</p>
        </div>
        <p class="book-author">${o}</p>
        
        
        <button class="learn-more">Learn More</button>
      </li>`).join("");w.insertAdjacentHTML("beforeend",s),l+=t,b.style.display=l>=d.length?"none":"block",I(),N()}function I(){x.textContent=`Showing ${Math.min(l,d.length)} from ${d.length}`}function T(){S(W),j()}async function E(t){const n=t.target;if(!n.classList.contains("category-item"))return;const s=n.textContent.trim();if(u=s,document.querySelectorAll(".category-item").forEach(o=>o.classList.remove("active")),n.classList.add("active"),s==="All categories"){i(c);return}try{const o=await k(s);i(o)}catch(o){console.error("Error loading category books:",o)}}window.addEventListener("resize",()=>{const t=window.innerWidth<1440;t!==L&&(L=t,v())});function N(){document.querySelectorAll(".learn-more").forEach((n,s)=>{n.addEventListener("click",async()=>{try{const o=d[s],e=await O(o._id);console.log(e)}catch(o){console.error("Error fetching book by ID:",o)}})})}function j(){const{height:t}=document.querySelector(".gallery-item").getBoundingClientRect();window.scrollBy({top:t*2,behavior:"smooth"})}v();H();const D=document.querySelector(".categories"),P=document.querySelector(".load-more");D.addEventListener("click",E);P.addEventListener("click",T);document.addEventListener("DOMContentLoaded",()=>{q()});
//# sourceMappingURL=index.js.map
