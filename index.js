import{a as g}from"./assets/vendor-CWxt7QI6.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function c(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(e){if(e.ep)return;e.ep=!0;const r=c(e);fetch(e.href,r)}})();const M=document.querySelector(".menu-btn"),p=document.querySelector(".mobile-menu"),B=document.querySelector(".close-btn"),C=document.querySelectorAll(".mobile-nav-link");M.addEventListener("click",()=>{p.classList.add("open")});B.addEventListener("click",()=>{p.classList.remove("open")});C.forEach(t=>{t.addEventListener("click",()=>{p.classList.remove("open")})});const f="https://books-backend.p.goit.global/books/";async function S(){return(await g(`${f}category-list`)).data}async function y(){return(await g(`${f}top-books`)).data}async function k(t){return(await g(`${f}category?category=${encodeURIComponent(t.trim())}`)).data}async function $(t){return(await g(`${f}${t}`)).data}const L=document.querySelector(".gallery"),h=document.querySelector(".load-more"),q=document.querySelector(".counter");let s=[],d=[],l=0,u="All categories",m=[];const A=4;let b=window.innerWidth<1440;async function w(){try{if(m.length===0){const e=(await S()).filter(r=>r.list_name&&r.list_name.trim()!=="");m=[{list_name:"All categories"},...e]}const t=document.querySelector("#categories-select"),n=document.querySelector(".categories-list");if(t.innerHTML="",n.innerHTML="",window.innerWidth<1440)m.forEach(o=>{const e=document.createElement("option");e.value=o.list_name,e.textContent=o.list_name,t.appendChild(e)}),t.addEventListener("change",async o=>{if(u=o.target.value,u==="All categories")i(s);else try{const e=await k(u);i(e)}catch(e){console.error("Error loading category books:",e)}}),s.length>0||(s=(await y()).flatMap(e=>e.books)),i(s);else{const o=m.filter(e=>e.list_name&&e.list_name.trim()!=="").map(e=>`
            <li class="category-item ${e.list_name==="All categories"?"active":""}">${e.list_name}</li>`).join("");n.insertAdjacentHTML("beforeend",o),n.addEventListener("click",E),s.length>0||(s=(await y()).flatMap(r=>r.books)),i(s)}}catch(t){console.error("Error loading categories:",t)}}async function _(){try{s=(await y()).flatMap(n=>n.books),u="All categories",i(s)}catch(t){console.error("Error loading books:",t)}}function i(t){d=t,l=0,L.innerHTML="";const n=window.innerWidth<768?10:24;v(n)}function v(t){const n=d.slice(l,l+t);if(n.length===0){h.style.display="none";return}const c=n.map(({author:o,title:e,book_image:r,price:a="10.00"})=>`
      <li class="gallery-item">
        <img src="${r}" alt="${e}">
        <div class = 'book-header'>
        <p class="book-title">${e}</p>
        <p class="book-price">$${a==="0.00"?"10.00":a}</p>
        </div>
        <p class="book-author">${o}</p>
        
        
        <button class="learn-more">Learn More</button>
      </li>`).join("");L.insertAdjacentHTML("beforeend",c),l+=t,h.style.display=l>=d.length?"none":"block",O(),I()}function O(){q.textContent=`Showing ${Math.min(l,d.length)} from ${d.length}`}function x(){v(A),T()}async function E(t){const n=t.target;if(!n.classList.contains("category-item"))return;const c=n.textContent.trim();if(u=c,document.querySelectorAll(".category-item").forEach(o=>o.classList.remove("active")),n.classList.add("active"),c==="All categories"){i(s);return}try{const o=await k(c);i(o)}catch(o){console.error("Error loading category books:",o)}}window.addEventListener("resize",()=>{const t=window.innerWidth<1440;t!==b&&(b=t,w())});function I(){document.querySelectorAll(".learn-more").forEach((n,c)=>{n.addEventListener("click",async()=>{try{const o=d[c],e=await $(o._id);console.log(e)}catch(o){console.error("Error fetching book by ID:",o)}})})}function T(){const{height:t}=document.querySelector(".gallery-item").getBoundingClientRect();window.scrollBy({top:t*2,behavior:"smooth"})}w();_();const H=document.querySelector(".categories"),N=document.querySelector(".load-more");H.addEventListener("click",E);N.addEventListener("click",x);
//# sourceMappingURL=index.js.map
