import{S as _,N as A,P as $,A as x,K as P,a as p}from"./assets/vendor-DnUEYdg3.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}})();function w(e,o){e&&(e.classList.toggle("is-disabled",o),e.disabled=o,e.setAttribute("aria-disabled",String(o)),e.tabIndex=o?-1:0)}function u(e,o,r){w(o,e.isBeginning),w(r,e.isEnd)}function O(){const e=document.querySelector(".feedbacks__swiper");if(!e)return;const o=e.closest(".feedbacks"),r=o.querySelector(".feedbacks__btn--prev"),n=o.querySelector(".feedbacks__btn--next"),t=o.querySelector(".feedbacks__pagination"),s=new _(e,{modules:[A,$,x,P],observer:!0,observeParents:!0,observeSlideChildren:!0,speed:450,spaceBetween:24,breakpointsBase:"window",slidesPerView:1,slidesPerGroup:1,breakpoints:{768:{slidesPerView:2,slidesPerGroup:2,spaceBetween:24},1280:{slidesPerView:3,slidesPerGroup:3,spaceBetween:24}},navigation:{prevEl:r,nextEl:n,disabledClass:"is-disabled"},pagination:{el:t,clickable:!0},keyboard:{enabled:!0,onlyInViewport:!0},a11y:{enabled:!0,slideRole:"listitem"},on:{init(i){u(i,r,n)},slideChange(i){u(i,r,n)},resize(i){u(i,r,n)},reachBeginning(i){u(i,r,n)},reachEnd(i){u(i,r,n)}}});setTimeout(()=>s.update(),0),window.addEventListener("load",()=>s.update())}function T(){const e=document.querySelector(".swiper-wrapper"),o=document.querySelectorAll(".swiper-slide"),r=document.querySelector(".hero-btn-left"),n=document.querySelector(".hero-btn-right");if(!e||o.length===0||!r||!n){console.warn("Hero slider: не знайдено потрібні елементи.");return}let t=0;const s=o.length,i=()=>o[0].offsetWidth;function M(){r.classList.toggle("disabled",t===0),n.classList.toggle("disabled",t===s-1)}function m(){const C=i();e.style.transform=`translateX(-${C*t}px)`,M()}r.addEventListener("click",()=>{t>0&&(t--,m())}),n.addEventListener("click",()=>{t<s-1&&(t++,m())}),window.addEventListener("resize",m),m()}const I=document.querySelector(".menu-btn"),h=document.querySelector(".mobile-menu"),W=document.querySelector(".close-btn"),H=document.querySelectorAll(".mobile-nav-link");I.addEventListener("click",()=>{h.classList.add("open")});W.addEventListener("click",()=>{h.classList.remove("open")});H.forEach(e=>{e.addEventListener("click",()=>{h.classList.remove("open")})});const y="https://books-backend.p.goit.global/books/";async function N(){return(await p(`${y}category-list`)).data}async function b(){return(await p(`${y}top-books`)).data}async function L(e){return(await p(`${y}category?category=${encodeURIComponent(e.trim())}`)).data}async function R(e){return(await p(`${y}${e}`)).data}const E=document.querySelector(".gallery"),v=document.querySelector(".load-more"),D=document.querySelector(".counter");let c=[],d=[],l=0,g="All categories",f=[];const V=4;let k=window.innerWidth<1440;async function S(){try{if(f.length===0){const t=(await N()).filter(s=>s.list_name&&s.list_name.trim()!=="");f=[{list_name:"All categories"},...t]}const e=document.querySelector("#categories-select"),o=document.querySelector(".categories-list");if(e.innerHTML="",o.innerHTML="",window.innerWidth<1440)f.forEach(n=>{const t=document.createElement("option");t.value=n.list_name,t.textContent=n.list_name,e.appendChild(t)}),e.addEventListener("change",async n=>{if(g=n.target.value,g==="All categories")a(c);else try{const t=await L(g);a(t)}catch(t){console.error("Error loading category books:",t)}}),c.length>0||(c=(await b()).flatMap(t=>t.books)),a(c);else{const n=f.filter(t=>t.list_name&&t.list_name.trim()!=="").map(t=>`
            <li class="category-item ${t.list_name==="All categories"?"active":""}">${t.list_name}</li>`).join("");o.insertAdjacentHTML("beforeend",n),o.addEventListener("click",q),c.length>0||(c=(await b()).flatMap(s=>s.books)),a(c)}}catch(e){console.error("Error loading categories:",e)}}async function j(){try{c=(await b()).flatMap(o=>o.books),g="All categories",a(c)}catch(e){console.error("Error loading books:",e)}}function a(e){d=e,l=0,E.innerHTML="";const o=window.innerWidth<768?10:24;B(o)}function B(e){const o=d.slice(l,l+e);if(o.length===0){v.style.display="none";return}const r=o.map(({author:n,title:t,book_image:s,price:i="10.00"})=>`
      <li class="gallery-item">
        <img src="${s}" alt="${t}">
        <div class = 'book-header'>
        <p class="book-title">${t}</p>
        <p class="book-price">$${i==="0.00"?"10.00":i}</p>
        </div>
        <p class="book-author">${n}</p>
        
        
        <button class="learn-more">Learn More</button>
      </li>`).join("");E.insertAdjacentHTML("beforeend",r),l+=e,v.style.display=l>=d.length?"none":"block",z(),G()}function z(){D.textContent=`Showing ${Math.min(l,d.length)} from ${d.length}`}function F(){B(V),K()}async function q(e){const o=e.target;if(!o.classList.contains("category-item"))return;const r=o.textContent.trim();if(g=r,document.querySelectorAll(".category-item").forEach(n=>n.classList.remove("active")),o.classList.add("active"),r==="All categories"){a(c);return}try{const n=await L(r);a(n)}catch(n){console.error("Error loading category books:",n)}}window.addEventListener("resize",()=>{const e=window.innerWidth<1440;e!==k&&(k=e,S())});function G(){document.querySelectorAll(".learn-more").forEach((o,r)=>{o.addEventListener("click",async()=>{try{const n=d[r],t=await R(n._id);console.log(t)}catch(n){console.error("Error fetching book by ID:",n)}})})}function K(){const{height:e}=document.querySelector(".gallery-item").getBoundingClientRect();window.scrollBy({top:e*2,behavior:"smooth"})}S();j();const U=document.querySelector(".categories"),X=document.querySelector(".load-more");U.addEventListener("click",q);X.addEventListener("click",F);(()=>{const e=document.getElementById("scrollUp");if(!e)return;const o=600,r=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches;function n(){window.scrollY>o?(e.hidden=!1,e.classList.add("is-visible")):(e.classList.remove("is-visible"),setTimeout(()=>{e.classList.contains("is-visible")||(e.hidden=!0)},250))}window.addEventListener("scroll",n,{passive:!0}),n(),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:r()?"auto":"smooth"})})})();document.addEventListener("DOMContentLoaded",()=>{O(),T()});
//# sourceMappingURL=index.js.map
