import{S as _,N as A,P as $,A as x,K as P,a as p}from"./assets/vendor-DnUEYdg3.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();function w(t,o){t&&(t.classList.toggle("is-disabled",o),t.disabled=o,t.setAttribute("aria-disabled",String(o)),t.tabIndex=o?-1:0)}function u(t,o,s){w(o,t.isBeginning),w(s,t.isEnd)}function O(){const t=document.querySelector(".feedbacks__swiper");if(!t)return;const o=t.closest(".feedbacks"),s=o.querySelector(".feedbacks__btn--prev"),n=o.querySelector(".feedbacks__btn--next"),e=o.querySelector(".feedbacks__pagination"),r=new _(t,{modules:[A,$,x,P],observer:!0,observeParents:!0,observeSlideChildren:!0,speed:450,spaceBetween:24,breakpointsBase:"window",slidesPerView:1,slidesPerGroup:1,breakpoints:{768:{slidesPerView:2,slidesPerGroup:2,spaceBetween:24},1280:{slidesPerView:3,slidesPerGroup:3,spaceBetween:24}},navigation:{prevEl:s,nextEl:n,disabledClass:"is-disabled"},pagination:{el:e,clickable:!0},keyboard:{enabled:!0,onlyInViewport:!0},a11y:{enabled:!0,slideRole:"listitem"},on:{init(i){u(i,s,n)},slideChange(i){u(i,s,n)},resize(i){u(i,s,n)},reachBeginning(i){u(i,s,n)},reachEnd(i){u(i,s,n)}}});setTimeout(()=>r.update(),0),window.addEventListener("load",()=>r.update())}function I(){const t=document.querySelector(".swiper-wrapper"),o=document.querySelectorAll(".swiper-slide"),s=document.querySelector(".hero-btn-left"),n=document.querySelector(".hero-btn-right");if(!t||o.length===0||!s||!n){console.warn("Hero slider: не знайдено потрібні елементи.");return}let e=0;const r=o.length,i=()=>o[0].offsetWidth;function M(){s.classList.toggle("disabled",e===0),n.classList.toggle("disabled",e===r-1)}function f(){const C=i();t.style.transform=`translateX(-${C*e}px)`,M()}s.addEventListener("click",()=>{e>0&&(e--,f())}),n.addEventListener("click",()=>{e<r-1&&(e++,f())}),window.addEventListener("resize",f),f()}const N=document.querySelector(".menu-btn"),h=document.querySelector(".mobile-menu"),W=document.querySelector(".close-btn"),H=document.querySelectorAll(".mobile-nav-link");N.addEventListener("click",()=>{h.classList.add("open")});W.addEventListener("click",()=>{h.classList.remove("open")});H.forEach(t=>{t.addEventListener("click",()=>{h.classList.remove("open")})});const y="https://books-backend.p.goit.global/books/";async function T(){return(await p(`${y}category-list`)).data}async function b(){return(await p(`${y}top-books`)).data}async function L(t){return(await p(`${y}category?category=${encodeURIComponent(t.trim())}`)).data}async function D(t){return(await p(`${y}${t}`)).data}const S=document.querySelector(".gallery"),k=document.querySelector(".load-more"),V=document.querySelector(".counter");let a=[],d=[],l=0,g="All categories",m=[];const j=4;let v=window.innerWidth<1440;async function E(){try{if(m.length===0){const e=(await T()).filter(r=>r.list_name&&r.list_name.trim()!=="");m=[{list_name:"All categories"},...e]}const t=document.querySelector("#categories-select"),o=document.querySelector(".categories-list");if(t.innerHTML="",o.innerHTML="",window.innerWidth<1440)m.forEach(n=>{const e=document.createElement("option");e.value=n.list_name,e.textContent=n.list_name,t.appendChild(e)}),t.addEventListener("change",async n=>{if(g=n.target.value,g==="All categories")c(a);else try{const e=await L(g);c(e)}catch(e){console.error("Error loading category books:",e)}}),a.length>0||(a=(await b()).flatMap(e=>e.books)),c(a);else{const n=m.filter(e=>e.list_name&&e.list_name.trim()!=="").map(e=>`
            <li class="category-item ${e.list_name==="All categories"?"active":""}">${e.list_name}</li>`).join("");o.insertAdjacentHTML("beforeend",n),o.addEventListener("click",q),a.length>0||(a=(await b()).flatMap(r=>r.books)),c(a)}}catch(t){console.error("Error loading categories:",t)}}async function R(){try{a=(await b()).flatMap(o=>o.books),g="All categories",c(a)}catch(t){console.error("Error loading books:",t)}}function c(t){d=t,l=0,S.innerHTML="";const o=window.innerWidth<768?10:24;B(o)}function B(t){const o=d.slice(l,l+t);if(o.length===0){k.style.display="none";return}const s=o.map(({author:n,title:e,book_image:r,price:i="10.00"})=>`
      <li class="gallery-item">
        <img src="${r}" alt="${e}">
        <div class = 'book-header'>
        <p class="book-title">${e}</p>
        <p class="book-price">$${i==="0.00"?"10.00":i}</p>
        </div>
        <p class="book-author">${n}</p>
        
        
        <button class="learn-more">Learn More</button>
      </li>`).join("");S.insertAdjacentHTML("beforeend",s),l+=t,k.style.display=l>=d.length?"none":"block",z(),K()}function z(){V.textContent=`Showing ${Math.min(l,d.length)} from ${d.length}`}function G(){B(j),F()}async function q(t){const o=t.target;if(!o.classList.contains("category-item"))return;const s=o.textContent.trim();if(g=s,document.querySelectorAll(".category-item").forEach(n=>n.classList.remove("active")),o.classList.add("active"),s==="All categories"){c(a);return}try{const n=await L(s);c(n)}catch(n){console.error("Error loading category books:",n)}}window.addEventListener("resize",()=>{const t=window.innerWidth<1440;t!==v&&(v=t,E())});function K(){document.querySelectorAll(".learn-more").forEach((o,s)=>{o.addEventListener("click",async()=>{try{const n=d[s],e=await D(n._id);console.log(e)}catch(n){console.error("Error fetching book by ID:",n)}})})}function F(){const{height:t}=document.querySelector(".gallery-item").getBoundingClientRect();window.scrollBy({top:t*2,behavior:"smooth"})}E();R();const U=document.querySelector(".categories"),X=document.querySelector(".load-more");U.addEventListener("click",q);X.addEventListener("click",G);document.addEventListener("DOMContentLoaded",()=>{O(),I()});
//# sourceMappingURL=index.js.map
