import{S as A,N as M,P as C,A as _,K as $,a as g}from"./assets/vendor-DnUEYdg3.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}})();function h(e,o){e&&(e.classList.toggle("is-disabled",o),e.disabled=o,e.setAttribute("aria-disabled",String(o)),e.tabIndex=o?-1:0)}function u(e,o,r){h(o,e.isBeginning),h(r,e.isEnd)}function x(){const e=document.querySelector(".feedbacks__swiper");if(!e)return;const o=e.closest(".feedbacks"),r=o.querySelector(".feedbacks__btn--prev"),n=o.querySelector(".feedbacks__btn--next"),t=o.querySelector(".feedbacks__pagination"),s=new A(e,{modules:[M,C,_,$],observer:!0,observeParents:!0,observeSlideChildren:!0,speed:450,spaceBetween:24,breakpointsBase:"window",slidesPerView:1,slidesPerGroup:1,breakpoints:{768:{slidesPerView:2,slidesPerGroup:2,spaceBetween:24},1280:{slidesPerView:3,slidesPerGroup:3,spaceBetween:24}},navigation:{prevEl:r,nextEl:n,disabledClass:"is-disabled"},pagination:{el:t,clickable:!0},keyboard:{enabled:!0,onlyInViewport:!0},a11y:{enabled:!0,slideRole:"listitem"},on:{init(i){u(i,r,n)},slideChange(i){u(i,r,n)},resize(i){u(i,r,n)},reachBeginning(i){u(i,r,n)},reachEnd(i){u(i,r,n)}}});setTimeout(()=>s.update(),0),window.addEventListener("load",()=>s.update())}function P(){const e=document.querySelector(".hero-swiper-wrapper"),o=document.querySelectorAll(".hero-swiper-slide"),r=document.querySelector(".hero-btn-left"),n=document.querySelector(".hero-btn-right");let t=0;const s=()=>{t===0?(r.classList.add("disabled"),r.setAttribute("aria-disabled","true")):(r.classList.remove("disabled"),r.removeAttribute("aria-disabled")),t===o.length-1?(n.classList.add("disabled"),n.setAttribute("aria-disabled","true")):(n.classList.remove("disabled"),n.removeAttribute("aria-disabled"))},i=()=>{const q=o[0].offsetWidth;e.style.transform=`translateX(-${q*t}px)`,s()};r.addEventListener("click",()=>{t>0&&(t--,i())}),n.addEventListener("click",()=>{t<o.length-1&&(t++,i())}),window.addEventListener("resize",()=>{i()}),i()}const O=document.querySelector(".menu-btn"),y=document.querySelector(".mobile-menu"),T=document.querySelector(".close-btn"),I=document.querySelectorAll(".mobile-nav-link");O.addEventListener("click",()=>{y.classList.add("open")});T.addEventListener("click",()=>{y.classList.remove("open")});I.forEach(e=>{e.addEventListener("click",()=>{y.classList.remove("open")})});const p="https://books-backend.p.goit.global/books/";async function N(){return(await g(`${p}category-list`)).data}async function b(){return(await g(`${p}top-books`)).data}async function k(e){return(await g(`${p}category?category=${encodeURIComponent(e.trim())}`)).data}async function W(e){return(await g(`${p}${e}`)).data}const L=document.querySelector(".gallery"),w=document.querySelector(".load-more"),H=document.querySelector(".counter");let a=[],d=[],l=0,m="All categories",f=[];const R=4;let v=window.innerWidth<1440;async function E(){try{if(f.length===0){const t=(await N()).filter(s=>s.list_name&&s.list_name.trim()!=="");f=[{list_name:"All categories"},...t]}const e=document.querySelector("#categories-select"),o=document.querySelector(".categories-list");if(e.innerHTML="",o.innerHTML="",window.innerWidth<1440)f.forEach(n=>{const t=document.createElement("option");t.value=n.list_name,t.textContent=n.list_name,e.appendChild(t)}),e.addEventListener("change",async n=>{if(m=n.target.value,m==="All categories")c(a);else try{const t=await k(m);c(t)}catch(t){console.error("Error loading category books:",t)}}),a.length>0||(a=(await b()).flatMap(t=>t.books)),c(a);else{const n=f.filter(t=>t.list_name&&t.list_name.trim()!=="").map(t=>`
            <li class="category-item ${t.list_name==="All categories"?"active":""}">${t.list_name}</li>`).join("");o.insertAdjacentHTML("beforeend",n),o.addEventListener("click",B),a.length>0||(a=(await b()).flatMap(s=>s.books)),c(a)}}catch(e){console.error("Error loading categories:",e)}}async function D(){try{a=(await b()).flatMap(o=>o.books),m="All categories",c(a)}catch(e){console.error("Error loading books:",e)}}function c(e){d=e,l=0,L.innerHTML="";const o=window.innerWidth<768?10:24;S(o)}function S(e){const o=d.slice(l,l+e);if(o.length===0){w.style.display="none";return}const r=o.map(({author:n,title:t,book_image:s,price:i="10.00"})=>`
      <li class="gallery-item">
        <img src="${s}" alt="${t}">
        <div class = 'book-header'>
        <p class="book-title">${t}</p>
        <p class="book-price">$${i==="0.00"?"10.00":i}</p>
        </div>
        <p class="book-author">${n}</p>
        
        
        <button class="learn-more">Learn More</button>
      </li>`).join("");L.insertAdjacentHTML("beforeend",r),l+=e,w.style.display=l>=d.length?"none":"block",V(),z()}function V(){H.textContent=`Showing ${Math.min(l,d.length)} from ${d.length}`}function j(){S(R),F()}async function B(e){const o=e.target;if(!o.classList.contains("category-item"))return;const r=o.textContent.trim();if(m=r,document.querySelectorAll(".category-item").forEach(n=>n.classList.remove("active")),o.classList.add("active"),r==="All categories"){c(a);return}try{const n=await k(r);c(n)}catch(n){console.error("Error loading category books:",n)}}window.addEventListener("resize",()=>{const e=window.innerWidth<1440;e!==v&&(v=e,E())});function z(){document.querySelectorAll(".learn-more").forEach((o,r)=>{o.addEventListener("click",async()=>{try{const n=d[r],t=await W(n._id);console.log(t)}catch(n){console.error("Error fetching book by ID:",n)}})})}function F(){const{height:e}=document.querySelector(".gallery-item").getBoundingClientRect();window.scrollBy({top:e*2,behavior:"smooth"})}E();D();const G=document.querySelector(".categories"),K=document.querySelector(".load-more");G.addEventListener("click",B);K.addEventListener("click",j);(()=>{const e=document.getElementById("scrollUp");if(!e)return;const o=600,r=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches;function n(){window.scrollY>o?(e.hidden=!1,e.classList.add("is-visible")):(e.classList.remove("is-visible"),setTimeout(()=>{e.classList.contains("is-visible")||(e.hidden=!0)},250))}window.addEventListener("scroll",n,{passive:!0}),n(),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:r()?"auto":"smooth"})})})();document.addEventListener("DOMContentLoaded",()=>{x(),P()});
//# sourceMappingURL=index.js.map
