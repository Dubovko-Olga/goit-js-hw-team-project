import{a as f}from"./assets/vendor-CWxt7QI6.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function a(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=a(e);fetch(e.href,n)}})();const m="https://books-backend.p.goit.global/books/";async function v(){return(await f(`${m}category-list`)).data}async function y(){return(await f(`${m}top-books`)).data}async function b(t){return(await f(`${m}category?category=${encodeURIComponent(t.trim())}`)).data}async function C(t){return(await f(`${m}${t}`)).data}const k=document.querySelector(".gallery"),p=document.querySelector(".load-more"),E=document.querySelector(".counter");let s=[],d=[],l=0,u="All categories",g=[];const $=4;let h=window.innerWidth<1440;async function w(){try{if(g.length===0){const e=(await v()).filter(n=>n.list_name&&n.list_name.trim()!=="");g=[{list_name:"All categories"},...e]}const t=document.querySelector("#categories-select"),r=document.querySelector(".categories-list");if(t.innerHTML="",r.innerHTML="",window.innerWidth<1440)g.forEach(o=>{const e=document.createElement("option");e.value=o.list_name,e.textContent=o.list_name,t.appendChild(e)}),t.addEventListener("change",async o=>{if(u=o.target.value,u==="All categories")c(s);else try{const e=await b(u);c(e)}catch(e){console.error("Error loading category books:",e)}}),s.length>0||(s=(await y()).flatMap(e=>e.books)),c(s);else{const o=g.filter(e=>e.list_name&&e.list_name.trim()!=="").map(e=>`
            <li class="category-item ${e.list_name==="All categories"?"active":""}">${e.list_name}</li>`).join("");r.insertAdjacentHTML("beforeend",o),r.addEventListener("click",M),s.length>0||(s=(await y()).flatMap(n=>n.books)),c(s)}}catch(t){console.error("Error loading categories:",t)}}async function B(){try{s=(await y()).flatMap(r=>r.books),u="All categories",c(s)}catch(t){console.error("Error loading books:",t)}}function c(t){d=t,l=0,k.innerHTML="";const r=window.innerWidth<768?10:24;L(r)}function L(t){const r=d.slice(l,l+t);if(r.length===0){p.style.display="none";return}const a=r.map(({author:o,title:e,book_image:n,price:i="10.00"})=>`
      <li class="gallery-item">
        <img src="${n}" alt="${e}">
        <div class = 'book-header'>
        <p class="book-title">${e}</p>
        <p class="book-price">$${i==="0.00"?"10.00":i}</p>
        </div>
        <p class="book-author">${o}</p>
        
        
        <button class="learn-more">Learn More</button>
      </li>`).join("");k.insertAdjacentHTML("beforeend",a),l+=t,p.style.display=l>=d.length?"none":"block",A(),_()}function A(){E.textContent=`Showing ${Math.min(l,d.length)} from ${d.length}`}function S(){L($),q()}async function M(t){const r=t.target;if(!r.classList.contains("category-item"))return;const a=r.textContent.trim();if(u=a,document.querySelectorAll(".category-item").forEach(o=>o.classList.remove("active")),r.classList.add("active"),a==="All categories"){c(s);return}try{const o=await b(a);c(o)}catch(o){console.error("Error loading category books:",o)}}window.addEventListener("resize",()=>{const t=window.innerWidth<1440;t!==h&&(h=t,w())});function _(){document.querySelectorAll(".learn-more").forEach((r,a)=>{r.addEventListener("click",async()=>{try{const o=d[a],e=await C(o._id);console.log(e)}catch(o){console.error("Error fetching book by ID:",o)}})})}function q(){const{height:t}=document.querySelector(".gallery-item").getBoundingClientRect();window.scrollBy({top:t*2,behavior:"smooth"})}w();B();const O=document.querySelector(".categories"),x=document.querySelector(".load-more");O.addEventListener("click",M);x.addEventListener("click",S);
//# sourceMappingURL=index.js.map
