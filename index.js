import{S as I,N as T,P as O,A as G,K,a as h,i as B,b as Y}from"./assets/vendor-Bp3hbnCQ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();function $(e,t){e&&(e.classList.toggle("is-disabled",t),e.disabled=t,e.setAttribute("aria-disabled",String(t)),e.tabIndex=t?-1:0)}function E(e,t,r){$(t,e.isBeginning),$(r,e.isEnd)}function U(){const e=document.querySelector(".feedbacks__swiper");if(!e)return;const t=e.closest(".feedbacks"),r=t.querySelector(".feedbacks__btn--prev"),n=t.querySelector(".feedbacks__btn--next"),o=t.querySelector(".feedbacks__pagination"),s=new I(e,{modules:[T,O,G,K],speed:450,spaceBetween:24,slidesPerView:1,slidesPerGroup:1,autoHeight:!0,observer:!0,observeParents:!0,observeSlideChildren:!0,breakpoints:{768:{slidesPerView:2,slidesPerGroup:2,spaceBetween:24},1440:{slidesPerView:3,slidesPerGroup:3,spaceBetween:24}},pagination:{el:o,clickable:!0,bulletElement:"button",renderBullet:(i,c)=>`<button type="button" class="${c}" aria-label="Go to slide ${i+1}"></button>`},navigation:{prevEl:r,nextEl:n,disabledClass:"is-disabled"},keyboard:{enabled:!0,onlyInViewport:!0},a11y:{enabled:!0},on:{afterInit(i){E(i,r,n)},slideChange(i){E(i,r,n)},resize(i){i.updateAutoHeight(200),E(i,r,n)}}});return queueMicrotask(()=>s.update()),window.addEventListener("load",()=>s.update()),s}function X(){const e=document.querySelector(".hero-swiper-wrapper"),t=document.querySelectorAll(".hero-swiper-slide"),r=document.querySelector(".hero-btn-left"),n=document.querySelector(".hero-btn-right");let o=0;const s=()=>{o===0?(r.classList.add("disabled"),r.setAttribute("aria-disabled","true")):(r.classList.remove("disabled"),r.removeAttribute("aria-disabled")),o===t.length-1?(n.classList.add("disabled"),n.setAttribute("aria-disabled","true")):(n.classList.remove("disabled"),n.removeAttribute("aria-disabled"))},i=()=>{const c=t[0].offsetWidth;e.style.transform=`translateX(-${c*o}px)`,s()};r.addEventListener("click",()=>{o>0&&(o--,i())}),n.addEventListener("click",()=>{o<t.length-1&&(o++,i())}),window.addEventListener("resize",()=>{i()}),i()}const J=document.querySelector(".menu-btn"),C=document.querySelector(".mobile-menu"),Q=document.querySelector(".close-btn"),Z=document.querySelectorAll(".mobile-nav-link");J.addEventListener("click",()=>{C.classList.add("open")});Q.addEventListener("click",()=>{C.classList.remove("open")});Z.forEach(e=>{e.addEventListener("click",()=>{C.classList.remove("open")})});const L="https://books-backend.p.goit.global/books/";async function ee(){return(await h(`${L}category-list`)).data}async function S(){return(await h(`${L}top-books`)).data}async function H(e){return(await h(`${L}category?category=${encodeURIComponent(e.trim())}`)).data}async function te(e){return(await h(`${L}${e}`)).data}const b=document.querySelector(".modal-overlay"),oe=document.querySelector(".modal-close"),ne=document.querySelector(".modal-book-image"),re=document.querySelector(".modal-book-title"),se=document.querySelector(".modal-book-author"),ie=document.querySelector(".modal-book-price"),ae=document.querySelector(".modal-book-desc"),le=document.querySelector(".add-to-cart"),ce=document.querySelector(".buy-now"),M=document.querySelector(".count"),de=document.querySelector(".plus"),ue=document.querySelector(".minus"),g=document.querySelector(".scrollup");let l=1,A=null;function me(e){l=1,M.textContent=l,ne.src=e.book_image,re.textContent=e.title,se.textContent=`by ${e.author}`,ie.textContent=`$${e.price==="0.00"?"10.00":e.price}`,ae.textContent=e.description||"No description available.",b.classList.remove("hidden"),g.classList.remove("is-visible"),document.body.classList.add("modal-open"),document.addEventListener("keydown",N),A||(A=new Y(b.querySelector(".accordion-container"),{duration:300,openFirst:!1,showMultiple:!0}))}function y(){b.classList.add("hidden"),document.body.classList.remove("modal-open"),g==null||g.classList.add("is-visible"),document.removeEventListener("keydown",N)}function N(e){e.key==="Escape"&&y()}oe.addEventListener("click",y);b.addEventListener("click",e=>{e.target===b&&y()});de.addEventListener("click",()=>{l++,M.textContent=l});ue.addEventListener("click",()=>{l>1&&(l--,M.textContent=l)});function pe(){document.querySelectorAll(".learn-more").forEach(t=>{t.addEventListener("click",async r=>{const n=r.currentTarget.dataset.id;try{const o=await te(n);me(o)}catch(o){console.error("Error fetching book by ID:",o)}})})}le.addEventListener("click",()=>{B.success({message:`You added ${l} book${l>1?"s":""} to cart`,position:"topRight"}),y()});ce.addEventListener("click",()=>{B.success({message:`You bought ${l} book${l>1?"s":""}`,position:"topRight"}),y()});const R=document.querySelector(".gallery"),x=document.querySelector(".load-more");document.querySelector(".counter");let a=[],q=[],p=0,f="All categories",v=[];const fe=4;let P=window.innerWidth<1440;async function W(){try{if(v.length===0){const o=(await ee()).filter(s=>s.list_name&&s.list_name.trim()!=="");v=[{list_name:"All categories"},...o]}const e=document.querySelector("#categories-select"),t=document.querySelector(".categories-list");if(e.innerHTML="",t.innerHTML="",window.innerWidth<1440)v.forEach(n=>{const o=document.createElement("option");o.value=n.list_name,o.textContent=n.list_name,e.appendChild(o)}),e.addEventListener("change",async n=>{if(f=n.target.value,f==="All categories")d(a);else try{const o=await H(f);d(o)}catch(o){console.error("Error loading category books:",o)}}),a.length>0||(a=(await S()).flatMap(o=>o.books)),d(a);else{const n=v.filter(o=>o.list_name&&o.list_name.trim()!=="").map(o=>`
            <li class="category-item ${o.list_name==="All categories"?"active":""}">${o.list_name}</li>`).join("");t.insertAdjacentHTML("beforeend",n),t.addEventListener("click",V),a.length>0||(a=(await S()).flatMap(s=>s.books)),d(a)}}catch(e){console.error("Error loading categories:",e)}}async function be(){try{a=(await S()).flatMap(t=>t.books),f="All categories",d(a)}catch(e){console.error("Error loading books:",e)}}function d(e){q=e,p=0,R.innerHTML="";const t=window.innerWidth<768?10:24;D(t)}function D(e){const t=q.slice(p,p+e);if(t.length===0){x.style.display="none";return}const r=t.map(({author:n,title:o,book_image:s,price:i="10.00",_id:c})=>`
      <li class="gallery-item">
        <img src="${s}" alt="${o}">
        <div class = 'book-header'>
        <p class="book-title">${o}</p>
        <p class="book-price">$${i==="0.00"?"10.00":i}</p>
        </div>
        <p class="book-author">${n}</p>
        
        
        <button  class="learn-more" data-id="${c}">Learn More</button>
      </li>`).join("");R.insertAdjacentHTML("beforeend",r),p+=e,x.style.display=p>=q.length?"none":"block",pe()}function ye(){D(fe),ve()}async function V(e){const t=e.target;if(!t.classList.contains("category-item"))return;const r=t.textContent.trim();if(f=r,document.querySelectorAll(".category-item").forEach(n=>n.classList.remove("active")),t.classList.add("active"),r==="All categories"){d(a);return}try{const n=await H(r);d(n)}catch(n){console.error("Error loading category books:",n)}}window.addEventListener("resize",()=>{const e=window.innerWidth<1440;e!==P&&(P=e,W())});function ve(){const{height:e}=document.querySelector(".gallery-item").getBoundingClientRect();window.scrollBy({top:e*2,behavior:"smooth"})}W();be();const ge=document.querySelector(".categories"),he=document.querySelector(".load-more");ge.addEventListener("click",V);he.addEventListener("click",ye);document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".events-swiper");if(!e)return;let t=null;function r(){window.innerWidth<1280&&!t?t=new I(e,{modules:[T,O],slidesPerView:1,spaceBetween:24,breakpoints:{768:{slidesPerView:2}},pagination:{el:".ev-pagination",clickable:!0,renderBullet:(n,o)=>`<li class="${o}" aria-label="Go to slide ${n+1}"></li>`,bulletClass:"ev-dot",bulletActiveClass:"ev-dot--active"},navigation:{nextEl:".events-swiper-btn-next",prevEl:".events-swiper-btn-prev"},watchOverflow:!0}):window.innerWidth>=1280&&t&&(t.destroy(!0,!0),t=null,e.querySelectorAll(".swiper-slide").forEach(n=>{n.removeAttribute("style")}))}r(),window.addEventListener("resize",r)});const m=document.getElementById("modal-backdrop");function Le(e){let t=document.querySelector(".modal");t?t.querySelector(".event-title").textContent=e:(t=document.createElement("div"),t.classList.add("modal"),t.innerHTML=`
            <button class="modal-close" aria-label="Close modal">&times;</button>
            <h2 class="modal-title">Register for Event</h2>
            <p class="event-title">${e}</p>
            <form class="modal-form">
                <label>
                    Name
                    <input type="text" placeholder="Your name" required>
                </label>
                <label>
                    Email
                    <input type="email" placeholder="Your email" required>
                </label>
                <button type="submit">Submit</button>
            </form>
        `,m.appendChild(t),t.querySelector(".modal-close").addEventListener("click",_)),m.classList.add("is-open"),document.body.classList.add("no-scroll"),m.addEventListener("click",function r(n){n.target===m&&_(),m.removeEventListener("click",r)})}function _(){m.classList.remove("is-open"),document.body.classList.remove("no-scroll")}const we=document.querySelectorAll(".event-register-btn");we.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.event;Le(t)})});const Ee=document.querySelectorAll(".event-btn"),u=document.querySelector("#modal-backdrop"),j=document.body;Ee.forEach(e=>{e.addEventListener("click",()=>ke(e.dataset.event))});function ke(e){const t=`
    <div class="modal">
      <button type="button" class="modal-close" aria-label="Close modal">
        <svg width="16" height="16">
         <use href="/img/icons.svg#icon-close"></use>
        </svg>
      </button>
      <h2 class="modal-title">Register</h2>
      <h3 class="event-title">${e}</h3>
      <form class="modal-form" id="register-form">
        <label>
          Name*
          <input type="text" name="name" placeholder="Ann" required />
        </label>
        <label>
          Email*
          <input type="email" name="email" placeholder="hello@booksy.com" required />
        </label>
        <label>
          Message
          <textarea name="message" rows="4" placeholder="Type your message..."></textarea>
        </label>
        <button type="submit">Register</button>
      </form>
    </div>
  `;u.innerHTML=t,u.classList.add("is-open"),j.classList.add("no-scroll");const r=u.querySelector(".modal-close"),n=u.querySelector("#register-form");r.addEventListener("click",w),u.addEventListener("click",z),window.addEventListener("keydown",F),n.addEventListener("submit",Se)}function w(){u.classList.remove("is-open"),j.classList.remove("no-scroll"),u.innerHTML="",window.removeEventListener("keydown",F),u.removeEventListener("click",z)}function z(e){e.target===u&&w()}function F(e){e.key==="Escape"&&w()}function Se(e){e.preventDefault();const t=e.target,r=t.elements.name,n=t.elements.email,o=r.value.trim(),s=n.value.trim();t.querySelectorAll("input, textarea").forEach(c=>qe(c)),t.querySelectorAll(".error-text").forEach(c=>c.remove());let i=!1;o||(k(r,"Error text"),i=!0),s?Be(s)||(k(n,"Invalid email"),i=!0):(k(n,"Error text"),i=!0),!i&&(B.success({message:"Registration successful!",position:"topRight",timeout:2500}),setTimeout(()=>w(),2500))}function k(e,t){e.classList.add("error"),e.dataset.originalPlaceholder||(e.dataset.originalPlaceholder=e.placeholder),e.placeholder=t;const r=document.createElement("p");r.classList.add("error-text"),r.textContent=t,e.insertAdjacentElement("afterend",r)}function qe(e){e.classList.remove("error"),e.dataset.originalPlaceholder&&(e.placeholder=e.dataset.originalPlaceholder)}function Be(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}(()=>{const e=document.getElementById("scrollUp");if(!e)return;const t=600,r=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches;function n(){window.scrollY>t?(e.hidden=!1,e.classList.add("is-visible")):(e.classList.remove("is-visible"),setTimeout(()=>{e.classList.contains("is-visible")||(e.hidden=!0)},250))}window.addEventListener("scroll",n,{passive:!0}),n(),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:r()?"auto":"smooth"})})})();document.addEventListener("DOMContentLoaded",()=>{U(),X()});
//# sourceMappingURL=index.js.map
